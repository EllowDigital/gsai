{"version":3,"file":"use-parallax-BNjfFntj.js","sources":["../../src/hooks/use-parallax.ts"],"sourcesContent":["import { useEffect, useState, useRef, RefObject } from \"react\";\r\n\r\ninterface ParallaxOptions {\r\n  speed?: number;\r\n  direction?: \"vertical\" | \"horizontal\";\r\n  reverse?: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function useParallax<T extends HTMLElement>(\r\n  options: ParallaxOptions = {}\r\n): RefObject<T> {\r\n  const {\r\n    speed = 0.2,\r\n    direction = \"vertical\",\r\n    reverse = false,\r\n    disabled = false,\r\n  } = options;\r\n\r\n  const ref = useRef<T>(null);\r\n  const [offset, setOffset] = useState(0);\r\n  const [isInView, setIsInView] = useState(false);\r\n\r\n  const multiplier = reverse ? -1 : 1;\r\n\r\n  // Intersection Observer to check if the element is in the viewport\r\n  useEffect(() => {\r\n    if (disabled) return;\r\n\r\n    const element = ref.current;\r\n    if (!element) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        setIsInView(entry.isIntersecting);\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    observer.observe(element);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, [disabled]);\r\n\r\n  // Handle scroll event and calculate parallax offset\r\n  useEffect(() => {\r\n    if (disabled || !isInView) return;\r\n\r\n    const handleScroll = () => {\r\n      const element = ref.current;\r\n      if (!element) return;\r\n\r\n      const rect = element.getBoundingClientRect();\r\n      const windowHeight = window.innerHeight;\r\n      const viewportCenter = windowHeight / 2;\r\n      const elementCenter = rect.top + rect.height / 2;\r\n      const distanceFromCenter = elementCenter - viewportCenter;\r\n\r\n      // Apply parallax effect\r\n      setOffset(distanceFromCenter * speed * multiplier);\r\n    };\r\n\r\n    // Use requestAnimationFrame for smoother scrolling\r\n    const onScroll = () => {\r\n      requestAnimationFrame(handleScroll);\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", onScroll, { passive: true });\r\n\r\n    // Initial calculation\r\n    handleScroll();\r\n\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", onScroll);\r\n    };\r\n  }, [speed, reverse, disabled, isInView, multiplier]);\r\n\r\n  // Apply transform to the element based on scroll position\r\n  useEffect(() => {\r\n    if (disabled || !ref.current) return;\r\n\r\n    const transform =\r\n      direction === \"vertical\"\r\n        ? `translateY(${offset}px)`\r\n        : `translateX(${offset}px)`;\r\n\r\n    const element = ref.current;\r\n    element.style.transform = transform;\r\n    element.style.transition = \"transform 0.1s ease-out\";\r\n    element.style.willChange = \"transform\";\r\n  }, [offset, direction, disabled]);\r\n\r\n  return ref;\r\n}\r\n"],"names":["useParallax","options","speed","direction","reverse","disabled","ref","useRef","offset","setOffset","useState","isInView","setIsInView","multiplier","useEffect","element","observer","entry","handleScroll","rect","viewportCenter","distanceFromCenter","onScroll","transform"],"mappings":"mCASgB,SAAAA,EACdC,EAA2B,GACb,CACR,KAAA,CACJ,MAAAC,EAAQ,GACR,UAAAC,EAAY,WACZ,QAAAC,EAAU,GACV,SAAAC,EAAW,EAAA,EACTJ,EAEEK,EAAMC,SAAU,IAAI,EACpB,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,CAAC,EAChC,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAK,EAExCG,EAAaT,EAAU,GAAK,EAGlCU,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAIT,EAAU,OAEd,MAAMU,EAAUT,EAAI,QACpB,GAAI,CAACS,EAAS,OAEd,MAAMC,EAAW,IAAI,qBACnB,CAAC,CAACC,CAAK,IAAM,CACXL,EAAYK,EAAM,cAAc,CAClC,EACA,CAAE,UAAW,EAAI,CACnB,EAEA,OAAAD,EAAS,QAAQD,CAAO,EAEjB,IAAM,CACXC,EAAS,WAAW,CACtB,CAAA,EACC,CAACX,CAAQ,CAAC,EAGbS,EAAAA,UAAU,IAAM,CACV,GAAAT,GAAY,CAACM,EAAU,OAE3B,MAAMO,EAAe,IAAM,CACzB,MAAMH,EAAUT,EAAI,QACpB,GAAI,CAACS,EAAS,OAER,MAAAI,EAAOJ,EAAQ,sBAAsB,EAErCK,EADe,OAAO,YACU,EAEhCC,EADgBF,EAAK,IAAMA,EAAK,OAAS,EACJC,EAGjCX,EAAAY,EAAqBnB,EAAQW,CAAU,CACnD,EAGMS,EAAW,IAAM,CACrB,sBAAsBJ,CAAY,CACpC,EAEA,cAAO,iBAAiB,SAAUI,EAAU,CAAE,QAAS,GAAM,EAGhDJ,EAAA,EAEN,IAAM,CACJ,OAAA,oBAAoB,SAAUI,CAAQ,CAC/C,CAAA,EACC,CAACpB,EAAOE,EAASC,EAAUM,EAAUE,CAAU,CAAC,EAGnDC,EAAAA,UAAU,IAAM,CACV,GAAAT,GAAY,CAACC,EAAI,QAAS,OAE9B,MAAMiB,EACJpB,IAAc,WACV,cAAcK,CAAM,MACpB,cAAcA,CAAM,MAEpBO,EAAUT,EAAI,QACpBS,EAAQ,MAAM,UAAYQ,EAC1BR,EAAQ,MAAM,WAAa,0BAC3BA,EAAQ,MAAM,WAAa,WAC1B,EAAA,CAACP,EAAQL,EAAWE,CAAQ,CAAC,EAEzBC,CACT"}