{"version":3,"file":"use-parallax-D5-_Rdh5.js","sources":["../../src/hooks/use-parallax.ts"],"sourcesContent":["\r\nimport { useEffect, useState, useRef, RefObject } from \"react\";\r\n\r\ninterface ParallaxOptions {\r\n  speed?: number;\r\n  direction?: \"vertical\" | \"horizontal\";\r\n  reverse?: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function useParallax<T extends HTMLElement>(\r\n  options: ParallaxOptions = {}\r\n): RefObject<T> {\r\n  const {\r\n    speed = 0.2,\r\n    direction = \"vertical\",\r\n    reverse = false,\r\n    disabled = false,\r\n  } = options;\r\n\r\n  const ref = useRef<T>(null);\r\n  const [offset, setOffset] = useState(0);\r\n  const [isInView, setIsInView] = useState(false);\r\n  const frameId = useRef<number | null>(null);\r\n\r\n  const multiplier = reverse ? -1 : 1;\r\n\r\n  // Intersection Observer to check if the element is in the viewport\r\n  useEffect(() => {\r\n    if (disabled) return;\r\n\r\n    const element = ref.current;\r\n    if (!element) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        setIsInView(entry.isIntersecting);\r\n      },\r\n      { threshold: 0.1, rootMargin: \"50px\" }\r\n    );\r\n\r\n    observer.observe(element);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n    };\r\n  }, [disabled]);\r\n\r\n  // Handle scroll event using requestAnimationFrame for smoother performance\r\n  useEffect(() => {\r\n    if (disabled || !isInView || !ref.current) return;\r\n\r\n    const handleScroll = () => {\r\n      if (!ref.current) return;\r\n      \r\n      const rect = ref.current.getBoundingClientRect();\r\n      const windowHeight = window.innerHeight;\r\n      const viewportCenter = windowHeight / 2;\r\n      const elementCenter = rect.top + rect.height / 2;\r\n      const distanceFromCenter = elementCenter - viewportCenter;\r\n\r\n      // Apply parallax effect with acceleration for smoother motion\r\n      setOffset(distanceFromCenter * speed * multiplier);\r\n      \r\n      // Continue animation loop\r\n      frameId.current = requestAnimationFrame(handleScroll);\r\n    };\r\n\r\n    // Start animation loop\r\n    frameId.current = requestAnimationFrame(handleScroll);\r\n\r\n    return () => {\r\n      if (frameId.current) {\r\n        cancelAnimationFrame(frameId.current);\r\n      }\r\n    };\r\n  }, [speed, reverse, disabled, isInView, multiplier]);\r\n\r\n  // Apply transform to the element based on scroll position\r\n  useEffect(() => {\r\n    if (disabled || !ref.current) return;\r\n\r\n    const transform =\r\n      direction === \"vertical\"\r\n        ? `translateY(${offset}px)`\r\n        : `translateX(${offset}px)`;\r\n\r\n    const element = ref.current;\r\n    element.style.transform = transform;\r\n    element.style.transition = \"transform 0.1s cubic-bezier(0.33, 1, 0.68, 1)\";\r\n    element.style.willChange = \"transform\";\r\n    \r\n    return () => {\r\n      if (element) {\r\n        element.style.willChange = 'auto';\r\n      }\r\n    };\r\n  }, [offset, direction, disabled]);\r\n\r\n  return ref;\r\n}\r\n"],"names":["useParallax","options","speed","direction","reverse","disabled","ref","useRef","offset","setOffset","useState","isInView","setIsInView","frameId","multiplier","useEffect","element","observer","entry","handleScroll","rect","viewportCenter","distanceFromCenter","transform"],"mappings":"wCAUgB,SAAAA,EACdC,EAA2B,GACb,CACR,KAAA,CACJ,MAAAC,EAAQ,GACR,UAAAC,EAAY,WACZ,QAAAC,EAAU,GACV,SAAAC,EAAW,EAAA,EACTJ,EAEEK,EAAMC,SAAU,IAAI,EACpB,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,CAAC,EAChC,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAK,EACxCG,EAAUN,SAAsB,IAAI,EAEpCO,EAAaV,EAAU,GAAK,EAGlCW,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAIV,EAAU,OAEd,MAAMW,EAAUV,EAAI,QACpB,GAAI,CAACU,EAAS,OAEd,MAAMC,EAAW,IAAI,qBACnB,CAAC,CAACC,CAAK,IAAM,CACXN,EAAYM,EAAM,cAAc,CAClC,EACA,CAAE,UAAW,GAAK,WAAY,MAAO,CACvC,EAEA,OAAAD,EAAS,QAAQD,CAAO,EAEjB,IAAM,CACXC,EAAS,WAAW,CACtB,CAAA,EACC,CAACZ,CAAQ,CAAC,EAGbU,EAAAA,UAAU,IAAM,CACd,GAAIV,GAAY,CAACM,GAAY,CAACL,EAAI,QAAS,OAE3C,MAAMa,EAAe,IAAM,CACrB,GAAA,CAACb,EAAI,QAAS,OAEZ,MAAAc,EAAOd,EAAI,QAAQ,sBAAsB,EAEzCe,EADe,OAAO,YACU,EAEhCC,EADgBF,EAAK,IAAMA,EAAK,OAAS,EACJC,EAGjCZ,EAAAa,EAAqBpB,EAAQY,CAAU,EAGzCD,EAAA,QAAU,sBAAsBM,CAAY,CACtD,EAGQ,OAAAN,EAAA,QAAU,sBAAsBM,CAAY,EAE7C,IAAM,CACPN,EAAQ,SACV,qBAAqBA,EAAQ,OAAO,CAExC,CAAA,EACC,CAACX,EAAOE,EAASC,EAAUM,EAAUG,CAAU,CAAC,EAGnDC,EAAAA,UAAU,IAAM,CACV,GAAAV,GAAY,CAACC,EAAI,QAAS,OAE9B,MAAMiB,EACJpB,IAAc,WACV,cAAcK,CAAM,MACpB,cAAcA,CAAM,MAEpBQ,EAAUV,EAAI,QACpB,OAAAU,EAAQ,MAAM,UAAYO,EAC1BP,EAAQ,MAAM,WAAa,gDAC3BA,EAAQ,MAAM,WAAa,YAEpB,IAAM,CACPA,IACFA,EAAQ,MAAM,WAAa,OAE/B,CACC,EAAA,CAACR,EAAQL,EAAWE,CAAQ,CAAC,EAEzBC,CACT"}